<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>04</title>
        <link rel="stylesheet" href="gameList.css">
        <style>
            body {
                margin: 0px;
                background-color: #fff;
                overflow: hidden;
            }
        </style>
        <script src="js/three.js"></script>
        <script src="js/ServerCommunicator.js"></script>
        <script src="js/Position.js"></script>
        <script src="js/GameBridge.js"></script>
        <script src="js/Game.js"></script>
        <script src="js/BoardVisual.js"></script>
        <script src="js/Board.js"></script>       
        <script src="js/TileVisual.js"></script>       

        <script src="js/Pieces/Piece.js"></script>
        <script src="js/Pieces/BishopPiece.js"></script>
        <script src="js/Pieces/BishopPieceVisual.js"></script>
        <script src="js/Pieces/KingPiece.js"></script>
        <script src="js/Pieces/KingPieceVisual.js"></script>
        <script src="js/Pieces/KnightPiece.js"></script>
        <script src="js/Pieces/KnightPieceVisual.js"></script>
        <script src="js/Pieces/RookPiece.js"></script>
        <script src="js/Pieces/RookPieceVisual.js"></script>
        <script src="js/Pieces/QueenPiece.js"></script>
        <script src="js/Pieces/QueenPieceVisual.js"></script>
        <script src="js/Pieces/PawnPiece.js"></script>
        <script src="js/Pieces/PawnPieceVisual.js"></script>

        <script src="js/gamestates/GameState.js"></script>
        <script src="js/gamestates/PlayingState.js"></script>
        <script src="js/gamestates/WaitingForPromotionState.js"></script>

        <script src="js/gameBridgeStates/GameBridgeState.js"></script>
        <script src="js/gameBridgeStates/MyTurnState.js"></script>
        <script src="js/gameBridgeStates/OtherTurnState.js"></script>
        <script src="js/gameBridgeStates/PromotionState.js"></script>

        <script src="js/exceptions/InvalidActionException.js"></script>
        <script src="js/exceptions/InvalidMoveException.js"></script>
        <script src="js/exceptions/PawnPromotionException.js"></script>
        <script src="js/exceptions/NoSuchPieceException.js"></script>
        <script src="js/exceptions/NotYourTurnException.js"></script>

        <script src="js/requests/Request.js"></script>
        <script src="js/answers/debug.js"></script>
        
        <script src="js/PreGameHandler.js"></script>
        <!-- 
        <script src=""></script> 
        -->

        <script>
            var preGameHandler = new PreGameHandler();
            var sCom = new ServerCommunicator();
            var gameBridge = null;

        </script>
    </head>
    <body>   
        <div id="LoginScreen">
            <form>
                Username: <br>
                <input id="LoginScreenUsername" type="text" name="username">
                <br> Password: <br>
                <input id="LoginScreenPassword" type="text" name="password">
                <br>
                <input id="CreateAccount" type="button" value = "Create Account" onclick = "preGameHandler.createAccount();">
                
                <input id="LoginAccount" type="button" value = "Login" onclick = "preGameHandler.login();">
            </form>
            <div id="AccountCreated" hidden="true">
                <p> Account "<span id="AccountName"></span>" successfully created </p>
            </div>
        </div>
        <div id="GameListScreen" hidden="true">
            <div id="GameListContainer">
                <table id="GameListTable">
                    <tr>
                        <th> Ready to play</th>
                        <th> Opponent </th>
                        <th> Your color</th>
                        <th> Game ID</th>
                        <th> Turn Number</th>
                    </tr>
                </table>
            </div>
            <div id="CreateGame">
                <button id="createGameButton" onclick="preGameHandler.showCreateGame();">
                    Create a new game
                </button>
            </div>

            <div id="CreateGameDetails" hidden="true">
                <form>
                    <input id = "CreateGameDetailsWhite" type="radio" name="white" value="1" checked> White<br>
                    <input id = "CreateGameDetailsBlack"type="radio" name="white" value="0"> Black<br>

                    Opponent: <br>
                    <input id="CreateGameDetailsOtherUser" type="text" name="otherUser">

                    <input id="CancelCreateGame" type="button" value = "Cancel" onclick = "preGameHandler.hideCreateGame();">
                    
                    <input id="CreateGameButton" type="button" value = "Create" onclick = "preGameHandler.createGame();">
                </form>
            </div>
        </div>


        <div id="container"></div> 
          <script>
            //FOR GAME TESTING
            //preGameHandler.clearPreGame();
            //startChessGame("1111",true,"eliteHaxxxor");
            function startChessGame(gameId, white, otherUser) {
                gameBridge = new GameBridge(sCom, gameId, white, otherUser);
                loop();
            }
            
            function joinChessGame(gameId, white, otherUser, game) {
                gameBridge = new GameBridge(sCom, gameId, white, otherUser, game);
                loop();
            }
        </script>
    </body>
</html>
